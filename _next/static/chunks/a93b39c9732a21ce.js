(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(96607);function r({title:e,children:a}){let[r,l]=(0,s.useState)(!1),i=(0,s.useRef)(null),n=(0,s.useRef)(null);return(0,s.useEffect)(()=>{function e(e){i.current&&!i.current.contains(e.target)&&n.current&&!n.current.contains(e.target)&&l(!1)}if(r)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r]),(0,t.jsxs)("div",{className:"relative inline-block",children:[(0,t.jsx)("button",{ref:n,onClick:()=>l(!r),className:"ml-1 w-4 h-4 rounded-full bg-gray-600 hover:bg-gray-500 text-gray-300 text-xs font-bold inline-flex items-center justify-center",title:`Learn about ${e}`,type:"button",children:"?"}),r&&(0,t.jsxs)("div",{ref:i,className:"absolute z-50 left-0 top-6 w-80 bg-gray-900 border border-gray-600 rounded-lg shadow-xl p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsx)("h4",{className:"text-white font-semibold",children:e}),(0,t.jsx)("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-white text-lg leading-none",children:"×"})]}),(0,t.jsx)("div",{className:"text-sm text-gray-300 space-y-2",children:a})]})]})}function l(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-blue-400",children:"Full Self-Driving (FSD)"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Most advanced. Handles city streets, intersections, and highway driving with minimal intervention. Currently only Tesla offers this level."})]}),(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-purple-400",children:"Hands-Free Highway"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Can drive hands-free on mapped highways. Examples: GM Super Cruise, Ford BlueCruise, Mercedes Drive Pilot. Driver must stay attentive."})]}),(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-blue-300",children:"Enhanced ADAS"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Hands-on highway driving with lane centering and adaptive cruise. Maintains lane position and following distance. Most modern vehicles have this."})]}),(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-gray-400",children:"Basic ADAS"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Lane keep assist (nudges back if drifting) and adaptive cruise control. Doesn't actively center in lane."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-500",children:"None"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"No driver assistance features. Rare in modern vehicles."})]})]})}function i(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-white",children:"Hands-Free Highway"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Allows completely hands-off driving on compatible highways. Uses cameras/radar to monitor road and driver attention. Only a few vehicles offer this feature."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-white",children:"Auto Lane Change"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Vehicle can automatically change lanes when you activate the turn signal or when the system determines it's safe. Usually requires driver supervision."})]})]})}function n(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-green-400",children:"TSP+ (Top Safety Pick+)"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:'Highest IIHS award. Requires "Good" ratings in all crash tests, good headlights on all trims, and excellent pedestrian detection.'})]}),(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-green-300",children:"TSP (Top Safety Pick)"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:'Second-highest award. Requires "Good" crash ratings and at least "Acceptable" headlights and pedestrian detection.'})]}),(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-blue-400",children:"Good"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:'Passes all IIHS crash tests with "Good" ratings but may not meet TSP criteria for headlights or other features.'})]}),(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-yellow-400",children:"Acceptable"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:'Passes IIHS crash tests with mixed ratings. Some areas may be "Acceptable" or "Marginal" instead of "Good".'})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-500",children:"Not Rated"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Vehicle hasn't been tested by IIHS yet, usually because it's too new or low-volume."})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-3 italic",children:"Note: 2025 IIHS criteria are stricter than previous years. Many vehicles that earned TSP in 2024 no longer qualify."})]})}function d(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-white",children:"Mirrors Extended"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Total width with side mirrors in normal driving position. This is the width you need for driving through narrow spaces."})]}),(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-white",children:"Mirrors Folded"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Width with side mirrors folded in against the body. Useful for tight parking garages or narrow parking spaces. Not all vehicles have power-folding mirrors."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-400",children:"Body Width"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Width of just the vehicle body, not including mirrors. Rarely used in practice but shown for reference."})]})]})}function o(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-blue-400",children:"Electric (EV)"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"100% battery-powered. No gas engine. Charges at home or public stations. Zero tailpipe emissions."})]}),(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-teal-400",children:"Plug-in Hybrid (PHEV)"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Has both electric motor and gas engine. Can drive 20-50 miles on battery alone, then switches to gas. Plugs in to charge."})]}),(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-green-400",children:"Hybrid"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Gas engine with electric assist. Battery charges from regenerative braking. Cannot plug in. Better fuel economy than gas-only."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-400",children:"Gasoline"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Traditional internal combustion engine. Most common type. Uses regular or premium gasoline."})]})]})}function c(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-white",children:"NACS / Tesla"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"North American Charging Standard. Originally Tesla-only, now becoming the standard for most new EVs. Access to Tesla Supercharger network."})]}),(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-white",children:"CCS1"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Combined Charging System (Type 1). Previously the standard for non-Tesla EVs in North America. Supports DC fast charging."})]}),(0,t.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium text-white",children:"J1772"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Standard Level 2 charging plug. Used by plug-in hybrids and older EVs. Slower charging, up to ~19kW."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-white",children:"CHAdeMO"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Japanese DC fast charging standard. Mostly used by older Nissan Leafs. Being phased out in North America."})]})]})}let x=[{value:"gasoline",label:"Gas"},{value:"hybrid",label:"Hybrid"},{value:"plug-in-hybrid",label:"Plug-in Hybrid"},{value:"electric",label:"Electric"},{value:"diesel",label:"Diesel"}],m=[{value:"none",label:"None (Gas)"},{value:"J1772",label:"J1772"},{value:"CCS1",label:"CCS1"},{value:"CHAdeMO",label:"CHAdeMO"},{value:"NACS",label:"NACS/Tesla"}],h=[{value:"sedan",label:"Sedan"},{value:"crossover",label:"Crossover"},{value:"suv",label:"SUV"},{value:"truck",label:"Truck"},{value:"minivan",label:"Minivan"},{value:"hatchback",label:"Hatchback"},{value:"wagon",label:"Wagon"},{value:"coupe",label:"Coupe"}],g=[2,4,5],p=[{value:"TSP+",label:"TSP+"},{value:"TSP",label:"TSP"},{value:"Good",label:"Good"},{value:"Acceptable",label:"Acceptable"},{value:"Not Rated",label:"Not Rated"}],u=[{value:"full-self-driving",label:"Full Self-Driving"},{value:"hands-free",label:"Hands-Free Highway"},{value:"enhanced",label:"Enhanced ADAS"},{value:"basic",label:"Basic ADAS"},{value:"none",label:"None"}],b=[{name:"EVs Under $50k",filters:{fuelTypes:["electric"],maxPrice:5e4}},{name:"Family SUVs",filters:{bodyTypes:["suv","crossover"],minSeats:6}},{name:"Top Safety",filters:{safetyRatings:["TSP+"]}},{name:"Fuel Efficient",filters:{minMpg:35}},{name:"Long Range EVs",filters:{fuelTypes:["electric"],minEvRange:300}},{name:"Hands-Free Driving",filters:{autonomousLevels:["hands-free","full-self-driving"]}},{name:"Compact",filters:{bodyTypes:["crossover","hatchback","sedan"],maxPrice:4e4}}];function y({filters:e,onFiltersChange:s,availableMakes:a,mirrorBuffer:y,onMirrorBufferChange:f,hasFavorites:j}){let v=(t,a)=>{s({...e,[t]:a})};return(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white border-b border-gray-600 pb-2",children:"Filters"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Quick Presets"}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:b.map(e=>(0,t.jsx)("button",{onClick:()=>s({...e.filters}),className:"px-3 py-1 rounded text-xs bg-purple-800 text-purple-200 hover:bg-purple-700",children:e.name},e.name))})]}),j&&(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:e.showFavoritesOnly??!1,onChange:e=>v("showFavoritesOnly",e.target.checked||void 0),className:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-yellow-500 focus:ring-yellow-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-yellow-400",children:"★ Show Favorites Only"})]})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Year"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"number",min:2010,max:2026,placeholder:"Min",value:e.minYear??"",onChange:e=>v("minYear",e.target.value?parseInt(e.target.value):void 0),className:"w-20 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,t.jsx)("span",{className:"text-gray-400 self-center",children:"to"}),(0,t.jsx)("input",{type:"number",min:2010,max:2026,placeholder:"Max",value:e.maxYear??"",onChange:e=>v("maxYear",e.target.value?parseInt(e.target.value):void 0),className:"w-20 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Seats"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"number",min:1,max:12,placeholder:"Min",value:e.minSeats??"",onChange:e=>v("minSeats",e.target.value?parseInt(e.target.value):void 0),className:"w-20 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,t.jsx)("span",{className:"text-gray-400 self-center",children:"to"}),(0,t.jsx)("input",{type:"number",min:1,max:12,placeholder:"Max",value:e.maxSeats??"",onChange:e=>v("maxSeats",e.target.value?parseInt(e.target.value):void 0),className:"w-20 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Price Range (MSRP)"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"number",min:0,step:1e3,placeholder:"Min $",value:e.minPrice??"",onChange:e=>v("minPrice",e.target.value?parseInt(e.target.value):void 0),className:"w-24 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,t.jsx)("span",{className:"text-gray-400 self-center",children:"to"}),(0,t.jsx)("input",{type:"number",min:0,step:1e3,placeholder:"Max $",value:e.maxPrice??"",onChange:e=>v("maxPrice",e.target.value?parseInt(e.target.value):void 0),className:"w-24 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-300",children:["Max Width for Garage (inches)",(0,t.jsx)(r,{title:"Vehicle Width",children:(0,t.jsx)(d,{})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"number",min:60,max:120,placeholder:"e.g., 90",value:e.maxWidthInches??"",onChange:e=>v("maxWidthInches",e.target.value?parseInt(e.target.value):void 0),className:"w-24 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,t.jsxs)("select",{value:e.widthFilterType??"extended",onChange:e=>v("widthFilterType",e.target.value),className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:[(0,t.jsx)("option",{value:"extended",children:"Mirrors Extended"}),(0,t.jsx)("option",{value:"folded",children:"Mirrors Folded"})]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"folded"===e.widthFilterType?"Filters by width with mirrors folded in":"Filters by width with mirrors extended out"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Mirror Buffer (inches)"}),(0,t.jsx)("input",{type:"number",min:0,max:20,value:y,onChange:e=>f(parseInt(e.target.value)||0),className:"w-20 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Added to body width when mirror width unknown"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Min Driver Legroom (inches)"}),(0,t.jsx)("input",{type:"number",min:35,max:50,step:.5,placeholder:"e.g., 42",value:e.minLegroom??"",onChange:e=>v("minLegroom",e.target.value?parseFloat(e.target.value):void 0),className:"w-24 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Filter for taller drivers"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Min Cargo Volume (cu ft)"}),(0,t.jsx)("input",{type:"number",min:0,max:150,placeholder:"e.g., 60",value:e.minCargo??"",onChange:e=>v("minCargo",e.target.value?parseFloat(e.target.value):void 0),className:"w-24 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Min MPG/MPGe"}),(0,t.jsx)("input",{type:"number",min:0,max:200,placeholder:"e.g., 30",value:e.minMpg??"",onChange:e=>v("minMpg",e.target.value?parseInt(e.target.value):void 0),className:"w-24 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Min EV Range (miles)"}),(0,t.jsx)("input",{type:"number",min:0,max:500,placeholder:"e.g., 250",value:e.minEvRange??"",onChange:e=>v("minEvRange",e.target.value?parseInt(e.target.value):void 0),className:"w-24 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Only shows EVs/PHEVs"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-300",children:["IIHS Safety Rating",(0,t.jsx)(r,{title:"IIHS Safety Ratings",children:(0,t.jsx)(n,{})})]}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:p.map(s=>(0,t.jsx)("button",{onClick:()=>{var t;let a,r;return t=s.value,void v("safetyRatings",(r=(a=e.safetyRatings??[]).includes(t)?a.filter(e=>e!==t):[...a,t]).length>0?r:void 0)},className:`px-3 py-1 rounded text-sm ${e.safetyRatings?.includes(s.value)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:s.label},s.value))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-300",children:["Driver Assistance (ADAS)",(0,t.jsx)(r,{title:"Driver Assistance Levels",children:(0,t.jsx)(l,{})})]}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:u.map(s=>(0,t.jsx)("button",{onClick:()=>{var t;let a,r;return t=s.value,void v("autonomousLevels",(r=(a=e.autonomousLevels??[]).includes(t)?a.filter(e=>e!==t):[...a,t]).length>0?r:void 0)},className:`px-3 py-1 rounded text-sm ${e.autonomousLevels?.includes(s.value)?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:s.label},s.value))}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,t.jsx)("input",{type:"checkbox",checked:!0===e.hasHandsFree,onChange:e=>v("hasHandsFree",!!e.target.checked||void 0),className:"rounded border-gray-600 bg-gray-700 text-purple-600"}),"Hands-Free Highway"]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,t.jsx)("input",{type:"checkbox",checked:!0===e.hasAutoLaneChange,onChange:e=>v("hasAutoLaneChange",!!e.target.checked||void 0),className:"rounded border-gray-600 bg-gray-700 text-purple-600"}),"Auto Lane Change"]}),(0,t.jsx)(r,{title:"ADAS Features",children:(0,t.jsx)(i,{})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Doors"}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:g.map(s=>(0,t.jsx)("button",{onClick:()=>{let t,a;v("doors",(a=(t=e.doors??[]).includes(s)?t.filter(e=>e!==s):[...t,s]).length>0?a:void 0)},className:`px-3 py-1 rounded text-sm ${e.doors?.includes(s)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:s},s))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Body Type"}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:h.map(s=>(0,t.jsx)("button",{onClick:()=>{var t;let a,r;return t=s.value,void v("bodyTypes",(r=(a=e.bodyTypes??[]).includes(t)?a.filter(e=>e!==t):[...a,t]).length>0?r:void 0)},className:`px-3 py-1 rounded text-sm ${e.bodyTypes?.includes(s.value)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:s.label},s.value))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-300",children:["Fuel Type",(0,t.jsx)(r,{title:"Fuel Types",children:(0,t.jsx)(o,{})})]}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:x.map(s=>(0,t.jsx)("button",{onClick:()=>{var t;let a,r;return t=s.value,void v("fuelTypes",(r=(a=e.fuelTypes??[]).includes(t)?a.filter(e=>e!==t):[...a,t]).length>0?r:void 0)},className:`px-3 py-1 rounded text-sm ${e.fuelTypes?.includes(s.value)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:s.label},s.value))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-300",children:["Plug Type",(0,t.jsx)(r,{title:"EV Plug Types",children:(0,t.jsx)(c,{})})]}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:m.map(s=>(0,t.jsx)("button",{onClick:()=>{var t;let a,r;return t=s.value,void v("plugTypes",(r=(a=e.plugTypes??[]).includes(t)?a.filter(e=>e!==t):[...a,t]).length>0?r:void 0)},className:`px-3 py-1 rounded text-sm ${e.plugTypes?.includes(s.value)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:s.label},s.value))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Makes"}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap max-h-32 overflow-y-auto",children:a.map(s=>(0,t.jsx)("button",{onClick:()=>{let t,a;v("makes",(a=(t=e.makes??[]).includes(s)?t.filter(e=>e!==s):[...t,s]).length>0?a:void 0)},className:`px-3 py-1 rounded text-sm ${e.makes?.includes(s)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:s},s))})]}),(0,t.jsx)("button",{onClick:()=>s({}),className:"w-full py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded text-sm",children:"Clear All Filters"})]})}let f={"TSP+":4,TSP:3,Good:2,Acceptable:1,"Not Rated":0,undefined:-1},j={"full-self-driving":4,"hands-free":3,enhanced:2,basic:1,none:0,undefined:-1};function v(e){return void 0===e?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e)}function N(e){return"electric"===e.fuelType?e.mpge?`${e.mpge} MPGe`:"N/A":e.mpgCombined?`${e.mpgCombined} MPG`:"N/A"}function w(e,t){return e.mirrorWidthInches??e.bodyWidthInches+t}function C(e,t,s,a){let r,l;if("bodyWidthInches"===s?(r=w(e,a),l=w(t,a)):(r=e[s],l=t[s]),void 0===r||void 0===l)return null;let i=l-r;if(0===i)return"same";let n=i>0?"+":"";return"msrp"===s||"usedPriceLow"===s||"usedPriceHigh"===s?n+v(i):n+i.toFixed(1)}function k(e){return`${e.year} ${e.make} ${e.model}${e.trim?` ${e.trim}`:""}`}let S="carcompare_garage_dimensions",F={width:120,length:240,height:96};function T({car:e,mirrorBuffer:a,onClose:r}){let[l,i]=(0,s.useState)(F),[n,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem(S);if(e)try{i(JSON.parse(e))}catch(e){console.error("Failed to parse garage dimensions:",e)}d(!0)},[]),(0,s.useEffect)(()=>{n&&localStorage.setItem(S,JSON.stringify(l))},[l,n]);let o=w(e,a),c=e.lengthInches??180,x=e.heightInches??65,m=(0,s.useMemo)(()=>{let e=l.width-o,t=l.length-c,s=l.height-x,a=e/2;return{fits:e>=0&&t>=0&&s>=0,comfortable:a>=24&&t>=36&&s>=6,widthClearance:e,lengthClearance:t,heightClearance:s,sideClearance:a}},[l,o,c,x]),h=.9*Math.min(400/l.width,400/l.length),g=l.width*h,p=l.length*h,u=o*h,b=c*h,y=(e,t)=>{i(s=>({...s,[e]:12*t}))},f=e=>{let t=Math.floor(e/12),s=Math.round(e%12);return 0===s?`${t}'`:`${t}' ${s}"`},j=(e,t)=>e<0?"text-red-400":e<t?"text-yellow-400":"text-green-400";return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:r,children:(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white",children:"Garage Fit Visualizer"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:k(e)})]}),(0,t.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white text-2xl leading-none p-2",children:"×"})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4 mb-6",children:[(0,t.jsx)("h4",{className:"text-white font-medium mb-3",children:"Your Garage Dimensions"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-gray-400 text-sm block mb-1",children:"Width (ft)"}),(0,t.jsx)("input",{type:"number",value:Math.round(l.width/12),onChange:e=>y("width",parseInt(e.target.value)||0),className:"w-full bg-gray-700 text-white rounded px-3 py-2 text-center",min:6,max:30})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-gray-400 text-sm block mb-1",children:"Length (ft)"}),(0,t.jsx)("input",{type:"number",value:Math.round(l.length/12),onChange:e=>y("length",parseInt(e.target.value)||0),className:"w-full bg-gray-700 text-white rounded px-3 py-2 text-center",min:10,max:40})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-gray-400 text-sm block mb-1",children:"Height (ft)"}),(0,t.jsx)("input",{type:"number",value:Math.round(l.height/12),onChange:e=>y("height",parseInt(e.target.value)||0),className:"w-full bg-gray-700 text-white rounded px-3 py-2 text-center",min:6,max:15})]})]}),(0,t.jsx)("p",{className:"text-gray-500 text-xs mt-2",children:"Tip: Measure from wall to wall, not including storage or shelving"})]}),(0,t.jsx)("div",{className:`rounded-lg p-4 mb-6 border-2 ${m.fits?m.comfortable?"bg-green-900/30 border-green-600":"bg-yellow-900/30 border-yellow-600":"bg-red-900/30 border-red-600"}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-3xl",children:m.fits?m.comfortable?"✓":"⚠":"✗"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:`text-lg font-semibold ${m.fits?m.comfortable?"text-green-400":"text-yellow-400":"text-red-400"}`,children:m.fits?m.comfortable?"Comfortable Fit":"Tight Fit":"Does Not Fit"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:m.fits?m.comfortable?"Plenty of room to open doors and walk around":"Will fit, but may be difficult to get in/out":"This vehicle is too large for your garage"})]})]})}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4 mb-6",children:[(0,t.jsx)("h4",{className:"text-white font-medium mb-3",children:"Top-Down View"}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)("div",{className:"relative bg-gray-700 border-4 border-gray-500 rounded",style:{width:g,height:p},children:[(0,t.jsx)("span",{className:"absolute -top-6 left-1/2 -translate-x-1/2 text-gray-400 text-xs",children:f(l.width)}),(0,t.jsx)("span",{className:"absolute -left-10 top-1/2 -translate-y-1/2 -rotate-90 text-gray-400 text-xs whitespace-nowrap",children:f(l.length)}),(0,t.jsxs)("div",{className:`absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 rounded ${m.fits?"bg-blue-600":"bg-red-600"}`,style:{width:u,height:b},children:[(0,t.jsx)("div",{className:"absolute top-1 left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-8 border-l-transparent border-r-transparent border-b-white/50"}),(0,t.jsx)("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 text-white/70 text-xs",children:"Car"})]}),m.fits&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"absolute left-1 top-1/2 -translate-y-1/2 text-xs text-green-400",children:f(m.sideClearance)}),(0,t.jsx)("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 text-xs text-green-400",children:f(m.sideClearance)}),(0,t.jsx)("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 text-xs text-green-400",children:f(m.lengthClearance/2)})]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-1/4 right-1/4 h-1 bg-yellow-500"})]})}),(0,t.jsx)("p",{className:"text-center text-gray-500 text-xs mt-4",children:"Yellow line = garage door"})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4 mb-6",children:[(0,t.jsx)("h4",{className:"text-white font-medium mb-3",children:"Clearance Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Car Width:"}),(0,t.jsxs)("span",{className:"text-white",children:[o.toFixed(1),'"']})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Side Clearance:"}),(0,t.jsx)("span",{className:j(m.sideClearance,24),children:m.sideClearance>=0?f(m.sideClearance):"Too wide"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Car Length:"}),(0,t.jsxs)("span",{className:"text-white",children:[c.toFixed(1),'"']})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Front/Back Clearance:"}),(0,t.jsx)("span",{className:j(m.lengthClearance,36),children:m.lengthClearance>=0?f(m.lengthClearance):"Too long"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Car Height:"}),(0,t.jsxs)("span",{className:"text-white",children:[x.toFixed(1),'"']})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Overhead Clearance:"}),(0,t.jsx)("span",{className:j(m.heightClearance,6),children:m.heightClearance>=0?f(m.heightClearance):"Too tall"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-white font-medium mb-2",children:"Recommendations"}),(0,t.jsxs)("ul",{className:"text-gray-400 text-sm space-y-1",children:[m.sideClearance<24&&m.sideClearance>=0&&(0,t.jsx)("li",{children:"• Less than 2ft on each side - opening doors may be difficult"}),m.sideClearance<18&&m.sideClearance>=0&&(0,t.jsx)("li",{children:"• Consider folding mirrors when parked"}),m.lengthClearance<36&&m.lengthClearance>=0&&(0,t.jsx)("li",{children:"• Limited space front/back - be careful pulling in"}),m.heightClearance<12&&m.heightClearance>=0&&(0,t.jsx)("li",{children:"• Low ceiling clearance - watch for roof racks"}),m.comfortable&&(0,t.jsx)("li",{className:"text-green-400",children:"• Great fit! Plenty of room for comfortable entry/exit"}),!m.fits&&(0,t.jsx)("li",{className:"text-red-400",children:"• This vehicle will not fit in your garage"})]})]}),(0,t.jsx)("p",{className:"text-gray-500 text-xs mt-4 text-center",children:"Dimensions are saved automatically for future comparisons"})]})})}function I({field:e,label:s,sortConfig:a,onSortChange:r}){let l=a.field===e;return(0,t.jsx)("th",{onClick:()=>r(e),className:"px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-700 select-none",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[s,l&&(0,t.jsx)("span",{className:"text-blue-400",children:"asc"===a.direction?"▲":"▼"})]})})}function $({diff:e,positive:s}){if(!e)return null;if("same"===e)return(0,t.jsx)("span",{className:"text-gray-500 text-xs ml-1",children:"(=)"});let a=e.startsWith("+"),r="higher"===s?a:"lower"===s?!a:null,l="text-gray-400";return!0===r&&(l="text-green-400"),!1===r&&(l="text-red-400"),(0,t.jsxs)("span",{className:`text-xs ml-1 ${l}`,children:["(",e,")"]})}function L({cars:e,sortConfig:a,onSortChange:r,baselineCar:l,mirrorBuffer:i,onSelectBaseline:n,compareList:d,onToggleCompare:o,favorites:c,onToggleFavorite:x}){let[m,h]=(0,s.useState)(null);return 0===e.length?(0,t.jsx)("div",{className:"bg-gray-800 rounded-lg p-8 text-center text-gray-400",children:"No cars match your filters. Try adjusting the filter criteria."}):(0,t.jsxs)(t.Fragment,{children:[m&&(0,t.jsx)(D,{car:m,onClose:()=>h(null),baselineCar:l,mirrorBuffer:i}),(0,t.jsxs)("div",{className:"overflow-x-auto bg-gray-800 rounded-lg max-h-[calc(100vh-300px)] overflow-y-auto",children:[(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,t.jsx)("thead",{className:"bg-gray-900 sticky top-0 z-10",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-300 uppercase tracking-wider w-10",children:(0,t.jsx)("span",{title:"Add to favorites",children:"★"})}),(0,t.jsx)("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-300 uppercase tracking-wider w-10",children:(0,t.jsx)("span",{title:"Add to compare",children:"⚖"})}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Base"}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Image"}),(0,t.jsx)(I,{field:"year",label:"Year",sortConfig:a,onSortChange:r}),(0,t.jsx)(I,{field:"make",label:"Make",sortConfig:a,onSortChange:r}),(0,t.jsx)(I,{field:"model",label:"Model",sortConfig:a,onSortChange:r}),(0,t.jsx)(I,{field:"bodyType",label:"Type",sortConfig:a,onSortChange:r}),(0,t.jsx)(I,{field:"safetyRating",label:"Safety",sortConfig:a,onSortChange:r}),(0,t.jsx)(I,{field:"autonomousLevel",label:"ADAS",sortConfig:a,onSortChange:r}),(0,t.jsx)(I,{field:"seats",label:"Seats",sortConfig:a,onSortChange:r}),(0,t.jsx)(I,{field:"driverLegroomInches",label:"Legroom",sortConfig:a,onSortChange:r}),(0,t.jsx)(I,{field:"mirrorsFoldedWidthInches",label:"Folded",sortConfig:a,onSortChange:r}),(0,t.jsx)(I,{field:"bodyWidthInches",label:"Extended",sortConfig:a,onSortChange:r}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Fuel"}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Plug"}),(0,t.jsx)(I,{field:"mpgCombined",label:"Efficiency",sortConfig:a,onSortChange:r}),(0,t.jsx)(I,{field:"electricRangeMiles",label:"EV Range",sortConfig:a,onSortChange:r}),(0,t.jsx)(I,{field:"msrp",label:"MSRP",sortConfig:a,onSortChange:r}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider max-w-xs",children:"Notes"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-700",children:e.map(e=>{let s=l?.id===e.id,a=w(e,i),r=c.includes(e.id),m=d.includes(e.id);return(0,t.jsxs)("tr",{className:`${s?"bg-blue-900/30":r?"bg-yellow-900/20":"hover:bg-gray-700/50"}`,children:[(0,t.jsx)("td",{className:"px-2 py-2 text-center",children:(0,t.jsx)("button",{onClick:()=>x(e.id),className:`text-xl transition-colors ${r?"text-yellow-400":"text-gray-600 hover:text-yellow-400"}`,title:r?"Remove from favorites":"Add to favorites",children:"★"})}),(0,t.jsx)("td",{className:"px-2 py-2 text-center",children:(0,t.jsx)("input",{type:"checkbox",checked:m,onChange:()=>o(e.id),className:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-blue-500",title:"Add to comparison"})}),(0,t.jsx)("td",{className:"px-3 py-2",children:(0,t.jsx)("button",{onClick:()=>n(e),className:`px-2 py-1 rounded text-xs ${s?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:s?"✓":"Set"})}),(0,t.jsx)("td",{className:"px-3 py-2",children:(0,t.jsx)(G,{car:e,onImageClick:()=>h(e)})}),(0,t.jsx)("td",{className:"px-3 py-2 text-sm text-white",children:e.year}),(0,t.jsx)("td",{className:"px-3 py-2 text-sm text-white",children:e.make}),(0,t.jsxs)("td",{className:"px-3 py-2 text-sm text-white",children:[e.model,e.trim&&(0,t.jsx)("span",{className:"text-gray-400 text-xs ml-1",children:e.trim})]}),(0,t.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,t.jsx)(P,{bodyType:e.bodyType})}),(0,t.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,t.jsx)(R,{rating:e.safetyRating})}),(0,t.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,t.jsx)(W,{level:e.autonomousLevel,name:e.adasName})}),(0,t.jsxs)("td",{className:"px-3 py-2 text-sm text-white",children:[e.seats,l&&!s&&(0,t.jsx)($,{diff:C(l,e,"seats",i),positive:"higher"})]}),(0,t.jsxs)("td",{className:"px-3 py-2 text-sm text-white",children:[e.driverLegroomInches?`${e.driverLegroomInches}"`:"-",l&&!s&&e.driverLegroomInches&&(0,t.jsx)($,{diff:C(l,e,"driverLegroomInches",i),positive:"higher"})]}),(0,t.jsxs)("td",{className:"px-3 py-2 text-sm text-white",title:"Width with mirrors folded",children:[e.mirrorsFoldedWidthInches?`${e.mirrorsFoldedWidthInches}"`:"-",l&&!s&&e.mirrorsFoldedWidthInches&&l.mirrorsFoldedWidthInches&&(0,t.jsx)($,{diff:C(l,e,"mirrorsFoldedWidthInches",i),positive:"lower"})]}),(0,t.jsxs)("td",{className:"px-3 py-2 text-sm text-white",title:"Width with mirrors extended",children:[a.toFixed(1),'"',l&&!s&&(0,t.jsx)($,{diff:C(l,e,"bodyWidthInches",i),positive:"lower"})]}),(0,t.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,t.jsx)(M,{fuelType:e.fuelType})}),(0,t.jsx)("td",{className:"px-3 py-2 text-sm text-gray-300",children:"none"===e.plugType?"-":e.plugType}),(0,t.jsxs)("td",{className:"px-3 py-2 text-sm text-white",children:[N(e),l&&!s&&e.mpgCombined&&l.mpgCombined&&(0,t.jsx)($,{diff:C(l,e,"mpgCombined",i),positive:"higher"})]}),(0,t.jsx)("td",{className:"px-3 py-2 text-sm text-white",children:e.electricRangeMiles?`${e.electricRangeMiles} mi`:"-"}),(0,t.jsxs)("td",{className:"px-3 py-2 text-sm text-white",children:[v(e.msrp),l&&!s&&(0,t.jsx)($,{diff:C(l,e,"msrp",i),positive:"lower"})]}),(0,t.jsx)("td",{className:"px-3 py-2 text-sm text-gray-400 max-w-xs truncate",title:e.notes,children:e.notes??"-"})]},e.id)})})]}),(0,t.jsx)("div",{className:"px-3 py-2 text-xs text-gray-500 border-t border-gray-700",children:"Folded = mirrors folded in, Extended = mirrors extended out"})]})]})}function M({fuelType:e}){return(0,t.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${{gasoline:"bg-gray-600 text-gray-200",diesel:"bg-yellow-800 text-yellow-200",hybrid:"bg-green-800 text-green-200","plug-in-hybrid":"bg-teal-800 text-teal-200",electric:"bg-blue-800 text-blue-200"}[e]??"bg-gray-600"}`,children:{gasoline:"Gas",diesel:"Diesel",hybrid:"Hybrid","plug-in-hybrid":"PHEV",electric:"EV"}[e]??e})}function P({bodyType:e}){return(0,t.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${{sedan:"bg-purple-800 text-purple-200",crossover:"bg-orange-800 text-orange-200",suv:"bg-amber-800 text-amber-200",truck:"bg-red-800 text-red-200",minivan:"bg-pink-800 text-pink-200",hatchback:"bg-cyan-800 text-cyan-200",wagon:"bg-lime-800 text-lime-200",coupe:"bg-indigo-800 text-indigo-200"}[e]??"bg-gray-600"}`,children:{sedan:"Sedan",crossover:"Crossover",suv:"SUV",truck:"Truck",minivan:"Minivan",hatchback:"Hatch",wagon:"Wagon",coupe:"Coupe"}[e]??e})}function R({rating:e}){return e&&"Not Rated"!==e?(0,t.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${{"TSP+":"bg-green-700 text-green-100",TSP:"bg-green-800 text-green-200",Good:"bg-blue-800 text-blue-200",Acceptable:"bg-yellow-800 text-yellow-200"}[e]??"bg-gray-600"}`,title:{"TSP+":"IIHS Top Safety Pick+",TSP:"IIHS Top Safety Pick",Good:"IIHS Good Rating",Acceptable:"IIHS Acceptable Rating"}[e],children:e}):(0,t.jsx)("span",{className:"text-gray-500 text-xs",children:"-"})}function W({level:e,name:s}){return e&&"none"!==e?(0,t.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${{none:"bg-gray-700 text-gray-400",basic:"bg-gray-600 text-gray-200",enhanced:"bg-blue-800 text-blue-200","hands-free":"bg-purple-700 text-purple-200","full-self-driving":"bg-cyan-700 text-cyan-200"}[e]}`,title:s??e,children:{none:"None",basic:"Basic",enhanced:"Enhanced","hands-free":"Hands-Free","full-self-driving":"FSD"}[e]}):(0,t.jsx)("span",{className:"text-gray-500 text-xs",children:"-"})}function A({label:e,enabled:s}){return(0,t.jsxs)("div",{className:`flex items-center gap-1 ${s?"text-green-400":"text-gray-500"}`,children:[(0,t.jsx)("span",{children:s?"✓":"✗"}),(0,t.jsx)("span",{children:e})]})}let H=[{id:"01",label:"Front 3/4"},{id:"09",label:"Rear 3/4"},{id:"13",label:"Side"},{id:"29",label:"Front"}];function E(e,t=400,s="01"){let a=e.model.split(" ")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),r=e.make.toLowerCase();return`https://cdn.imagin.studio/getImage?customer=img&make=${r}&modelFamily=${a}&paintId=pspc0001&angle=${s}&width=${t}`}function D({car:e,onClose:a,baselineCar:r,mirrorBuffer:l}){let[i,n]=(0,s.useState)("01"),[d,o]=(0,s.useState)(!1),c=E(e,800,i),x=r?.id===e.id,m=w(e,l),h=({label:e,value:s,diff:a,positive:r})=>(0,t.jsxs)("div",{className:"flex justify-between py-1 border-b border-gray-700",children:[(0,t.jsx)("span",{className:"text-gray-400",children:e}),(0,t.jsxs)("span",{className:"text-white",children:[s??"-",a&&!x&&(0,t.jsx)($,{diff:a,positive:r})]})]});return(0,t.jsxs)(t.Fragment,{children:[d&&(0,t.jsx)(T,{car:e,mirrorBuffer:l,onClose:()=>o(!1)}),(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-start justify-center p-4 overflow-y-auto",onClick:a,children:(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg max-w-4xl w-full p-6 mt-4 mb-8",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-2xl font-bold text-white",children:[e.year," ",e.make," ",e.model]}),e.trim&&(0,t.jsx)("p",{className:"text-gray-400",children:e.trim}),(0,t.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,t.jsx)(P,{bodyType:e.bodyType}),(0,t.jsx)(M,{fuelType:e.fuelType}),(0,t.jsx)(R,{rating:e.safetyRating})]})]}),(0,t.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-white text-3xl leading-none p-2",children:"×"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("img",{src:c,alt:`${e.year} ${e.make} ${e.model} - ${H.find(e=>e.id===i)?.label}`,className:"w-full h-auto rounded-lg mb-3"}),(0,t.jsx)("div",{className:"flex gap-2 justify-center",children:H.map(s=>(0,t.jsxs)("button",{onClick:()=>n(s.id),className:`relative rounded overflow-hidden border-2 transition-all ${i===s.id?"border-blue-500 scale-105":"border-gray-600 hover:border-gray-400"}`,children:[(0,t.jsx)("img",{src:E(e,150,s.id),alt:s.label,className:"w-20 h-12 object-cover"}),(0,t.jsx)("span",{className:"absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs py-0.5 text-center",children:s.label})]},s.id))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-700 pb-2",children:"Pricing"}),(0,t.jsx)(h,{label:"MSRP",value:v(e.msrp),diff:r?C(r,e,"msrp",l):null,positive:"lower"})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-700 pb-2",children:"Dimensions"}),(0,t.jsx)(h,{label:"Width (Mirrors Folded)",value:e.mirrorsFoldedWidthInches?`${e.mirrorsFoldedWidthInches}"`:void 0,diff:r&&r.mirrorsFoldedWidthInches&&e.mirrorsFoldedWidthInches?C(r,e,"mirrorsFoldedWidthInches",l):null,positive:"lower"}),(0,t.jsx)(h,{label:"Width (Mirrors Extended)",value:`${m.toFixed(1)}"`,diff:r?C(r,e,"bodyWidthInches",l):null,positive:"lower"}),(0,t.jsx)(h,{label:"Body Width",value:e.bodyWidthInches?`${e.bodyWidthInches}"`:void 0}),(0,t.jsx)(h,{label:"Length",value:e.lengthInches?`${e.lengthInches}"`:void 0}),(0,t.jsx)(h,{label:"Height",value:e.heightInches?`${e.heightInches}"`:void 0}),(0,t.jsx)("button",{onClick:()=>o(!0),className:"mt-3 w-full py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded text-sm font-medium transition-colors",children:"Check Garage Fit"})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-700 pb-2",children:"Capacity"}),(0,t.jsx)(h,{label:"Seats",value:e.seats,diff:r?C(r,e,"seats",l):null,positive:"higher"}),(0,t.jsx)(h,{label:"Doors",value:e.doors}),(0,t.jsx)(h,{label:"Driver Legroom",value:e.driverLegroomInches?`${e.driverLegroomInches}"`:void 0,diff:r?C(r,e,"driverLegroomInches",l):null,positive:"higher"}),(0,t.jsx)(h,{label:"Cargo Volume",value:e.cargoVolumesCuFt?`${e.cargoVolumesCuFt} cu ft`:void 0})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-700 pb-2",children:"Efficiency"}),"electric"!==e.fuelType&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h,{label:"City MPG",value:e.mpgCity}),(0,t.jsx)(h,{label:"Highway MPG",value:e.mpgHighway}),(0,t.jsx)(h,{label:"Combined MPG",value:e.mpgCombined,diff:r?C(r,e,"mpgCombined",l):null,positive:"higher"})]}),e.mpge&&(0,t.jsx)(h,{label:"MPGe",value:e.mpge}),e.electricRangeMiles&&(0,t.jsx)(h,{label:"Electric Range",value:`${e.electricRangeMiles} mi`,diff:r?C(r,e,"electricRangeMiles",l):null,positive:"higher"})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-700 pb-2",children:"Powertrain"}),(0,t.jsx)(h,{label:"Fuel Type",value:e.fuelType}),(0,t.jsx)(h,{label:"Plug Type",value:"none"===e.plugType?"N/A":e.plugType})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-700 pb-2",children:"Safety"}),(0,t.jsx)(h,{label:"IIHS Rating",value:e.safetyRating??"Not Rated"}),"TSP+"===e.safetyRating&&(0,t.jsx)("p",{className:"text-xs text-green-400 mt-2",children:"Top Safety Pick+ - Highest IIHS award"}),"TSP"===e.safetyRating&&(0,t.jsx)("p",{className:"text-xs text-green-400 mt-2",children:"Top Safety Pick - Excellent safety rating"})]})]}),e.autonomousLevel&&"none"!==e.autonomousLevel&&(0,t.jsxs)("div",{className:"mt-6 bg-gray-900 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-700 pb-2",children:"Driver Assistance"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(W,{level:e.autonomousLevel,name:e.adasName}),e.adasName&&(0,t.jsx)("span",{className:"text-gray-300 text-sm",children:e.adasName})]}),e.adasFeatures&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsx)(A,{label:"Adaptive Cruise Control",enabled:e.adasFeatures.adaptiveCruiseControl}),(0,t.jsx)(A,{label:"Lane Keep Assist",enabled:e.adasFeatures.laneKeepAssist}),(0,t.jsx)(A,{label:"Lane Centering",enabled:e.adasFeatures.laneCenteringAssist}),(0,t.jsx)(A,{label:"Blind Spot Monitoring",enabled:e.adasFeatures.blindSpotMonitoring}),(0,t.jsx)(A,{label:"Auto Emergency Braking",enabled:e.adasFeatures.automaticEmergencyBraking}),(0,t.jsx)(A,{label:"Traffic Sign Recognition",enabled:e.adasFeatures.trafficSignRecognition}),(0,t.jsx)(A,{label:"Driver Monitoring",enabled:e.adasFeatures.driverMonitoring}),(0,t.jsx)(A,{label:"Auto Lane Change",enabled:e.adasFeatures.autoLaneChange}),(0,t.jsx)(A,{label:"Summon/Remote Parking",enabled:e.adasFeatures.summonParking}),(0,t.jsx)(A,{label:"Hands-Free Highway",enabled:e.adasFeatures.handsFreeHighway}),(0,t.jsx)(A,{label:"City Autonomy",enabled:e.adasFeatures.cityAutopilot})]})]}),(e.standardFeatures?.length||e.notes)&&(0,t.jsxs)("div",{className:"mt-6 bg-gray-900 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-700 pb-2",children:"Features & Notes"}),e.standardFeatures&&e.standardFeatures.length>0&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"Standard Features:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:e.standardFeatures.map((e,s)=>(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-700 rounded text-xs text-gray-200",children:e},s))})]}),e.notes&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"Notes:"}),(0,t.jsx)("p",{className:"text-white mt-1",children:e.notes})]})]}),(0,t.jsxs)("div",{className:"mt-6 bg-gray-900 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-700 pb-2",children:"Search This Vehicle"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,t.jsx)(V,{name:"Cars.com",url:`https://www.cars.com/shopping/results/?keyword=${encodeURIComponent(`${e.year} ${e.make} ${e.model}`)}`,color:"bg-blue-700"}),(0,t.jsx)(V,{name:"AutoTrader",url:`https://www.autotrader.com/cars-for-sale/all-cars/${e.make.toLowerCase()}/${e.model.toLowerCase().replace(/\s+/g,"-")}?startYear=${e.year}&endYear=${e.year}`,color:"bg-red-700"}),(0,t.jsx)(V,{name:"CarGurus",url:`https://www.cargurus.com/Cars/inventorylisting/viewDetailsFilterViewInventoryListing.action?zip=10001&sourceContext=carGurusHomePageModel&newSearchFromOverviewPage=true&inventorySearchWidgetType=AUTO&entitySelectingHelper.selectedEntity=${encodeURIComponent(`${e.year} ${e.make} ${e.model}`)}`,color:"bg-green-700"}),(0,t.jsx)(V,{name:"Edmunds",url:`https://www.edmunds.com/${e.make.toLowerCase()}/${e.model.toLowerCase().replace(/\s+/g,"-")}/${e.year}/`,color:"bg-purple-700"}),(0,t.jsx)(V,{name:"KBB",url:`https://www.kbb.com/${e.make.toLowerCase()}/${e.model.toLowerCase().replace(/\s+/g,"-")}/${e.year}/`,color:"bg-cyan-700"}),(0,t.jsx)(V,{name:"TrueCar",url:`https://www.truecar.com/used-cars-for-sale/listings/${e.make.toLowerCase()}/${e.model.toLowerCase().replace(/\s+/g,"-")}/year-${e.year}/`,color:"bg-orange-700"}),(0,t.jsx)(V,{name:"CarMax",url:`https://www.carmax.com/cars/${e.make.toLowerCase()}/${e.model.toLowerCase().replace(/\s+/g,"-")}?year=${e.year}`,color:"bg-yellow-700"}),(0,t.jsx)(V,{name:"Google",url:`https://www.google.com/search?q=${encodeURIComponent(`${e.year} ${e.make} ${e.model} for sale`)}`,color:"bg-gray-600"})]})]}),x&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-900/30 rounded-lg border border-blue-700",children:(0,t.jsx)("p",{className:"text-blue-300 text-sm",children:"This is your baseline vehicle for comparisons."})}),(0,t.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-700 flex justify-between text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["Last updated: ",e.lastUpdated]}),(0,t.jsxs)("span",{children:["Source: ",e.dataSource??"manual"]})]})]})})]})}function G({car:e,onImageClick:a}){let[r,l]=(0,s.useState)(!1),[i,n]=(0,s.useState)(!0),d=E(e);return r?(0,t.jsx)("div",{className:"w-28 h-16 bg-gray-700 rounded flex items-center justify-center text-gray-500 text-sm",children:e.bodyType.charAt(0).toUpperCase()}):(0,t.jsxs)("div",{className:"w-28 h-16 relative cursor-pointer hover:opacity-80 transition-opacity",onClick:a,children:[i&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-700 rounded flex items-center justify-center text-gray-500 text-xs",children:"..."}),(0,t.jsx)("img",{src:d,alt:`${e.year} ${e.make} ${e.model}`,className:`w-28 h-16 object-cover rounded ${i?"opacity-0":"opacity-100"}`,onLoad:()=>n(!1),onError:()=>{l(!0),n(!1)}})]})}function V({name:e,url:s,color:a}){return(0,t.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:`${a} hover:opacity-80 text-white text-center py-2 px-3 rounded text-sm font-medium transition-opacity`,children:e})}function B({cars:e,baselineCar:s,onBaselineChange:a,mirrorBuffer:r}){return(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 space-y-3",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white border-b border-gray-600 pb-2",children:"Baseline Vehicle"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Compare all cars against:"}),(0,t.jsxs)("select",{value:s?.id??"",onChange:t=>{a(e.find(e=>e.id===t.target.value)??null)},className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:[(0,t.jsx)("option",{value:"",children:"No baseline selected"}),e.map(e=>(0,t.jsx)("option",{value:e.id,children:k(e)},e.id))]})]}),s&&(0,t.jsxs)("div",{className:"bg-gray-900 rounded p-3 space-y-2",children:[(0,t.jsx)("h3",{className:"font-medium text-white",children:k(s)}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Width (Folded):"}),(0,t.jsx)("span",{className:"text-white ml-1",children:s.mirrorsFoldedWidthInches?`${s.mirrorsFoldedWidthInches}"`:"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Width (Extended):"}),(0,t.jsxs)("span",{className:"text-white ml-1",children:[w(s,r).toFixed(1),'"']})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Seats:"}),(0,t.jsx)("span",{className:"text-white ml-1",children:s.seats})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Doors:"}),(0,t.jsx)("span",{className:"text-white ml-1",children:s.doors})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Fuel:"}),(0,t.jsx)("span",{className:"text-white ml-1 capitalize",children:s.fuelType.replace("-"," ")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Efficiency:"}),(0,t.jsx)("span",{className:"text-white ml-1",children:N(s)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"MSRP:"}),(0,t.jsx)("span",{className:"text-white ml-1",children:v(s.msrp)})]})]}),s.notes&&(0,t.jsx)("p",{className:"text-xs text-gray-400 italic",children:s.notes}),(0,t.jsx)("button",{onClick:()=>a(null),className:"text-xs text-blue-400 hover:text-blue-300",children:"Clear baseline"})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Differences shown in table: ",(0,t.jsx)("span",{className:"text-green-400",children:"green = better"}),","," ",(0,t.jsx)("span",{className:"text-red-400",children:"red = worse"})]})]})}function U({cars:e,onClose:a,onRemoveCar:r,mirrorBuffer:l}){let i=(0,s.useRef)(null);if((0,s.useEffect)(()=>{let e=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${e}px`,document.body.style.width="100%",i.current&&(i.current.scrollTop=0),()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,e)}},[]),0===e.length)return null;let n=({label:e,values:s,format:a,highlight:r})=>{let l=s.map(e=>a?a(e):e??"-"),i=-1;if(r&&s.some(e=>void 0!==e)){let e=s.map(e=>"number"==typeof e?e:parseFloat(String(e))||0);if("higher"===r)i=e.indexOf(Math.max(...e));else{let t=e.filter(e=>e>0);if(t.length>0){let s=Math.min(...t);i=e.indexOf(s)}}}return(0,t.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,t.jsx)("td",{className:"px-4 py-2 text-gray-400 font-medium",children:e}),l.map((e,s)=>(0,t.jsx)("td",{className:`px-4 py-2 text-center ${i===s?"text-green-400 font-semibold":"text-white"}`,children:e},s))]})},d=({rating:e})=>e&&"Not Rated"!==e?(0,t.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${{"TSP+":"bg-green-700 text-green-100",TSP:"bg-green-800 text-green-200",Good:"bg-blue-800 text-blue-200",Acceptable:"bg-yellow-800 text-yellow-200"}[e]??"bg-gray-600"}`,children:e}):(0,t.jsx)("span",{className:"text-gray-500",children:"-"});return(0,t.jsx)("div",{ref:i,className:"fixed z-50 bg-black/80",style:{top:0,left:0,right:0,bottom:0,overflowY:"auto"},onClick:a,children:(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg max-w-6xl p-6",style:{margin:"20px auto",width:"calc(100% - 32px)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Compare Vehicles"}),(0,t.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-white text-3xl leading-none p-2",children:"×"})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-gray-400 w-40"}),e.map(e=>(0,t.jsx)("th",{className:"px-4 py-4 text-center min-w-[200px]",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:()=>r(e.id),className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-500 text-white rounded-full w-6 h-6 text-sm",title:"Remove from comparison",children:"×"}),(0,t.jsx)("img",{src:((e,t=400)=>{let s=e.model.split(" ")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),a=e.make.toLowerCase();return`https://cdn.imagin.studio/getImage?customer=img&make=${a}&modelFamily=${s}&paintId=pspc0001&angle=01&width=${t}`})(e,300),alt:`${e.year} ${e.make} ${e.model}`,className:"w-full h-32 object-contain rounded-lg mb-2"}),(0,t.jsxs)("div",{className:"text-white font-semibold",children:[e.year," ",e.make]}),(0,t.jsx)("div",{className:"text-gray-300",children:e.model}),e.trim&&(0,t.jsx)("div",{className:"text-gray-500 text-sm",children:e.trim})]})},e.id))]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsx)("tr",{className:"bg-gray-900",children:(0,t.jsx)("td",{colSpan:e.length+1,className:"px-4 py-2 text-blue-400 font-semibold text-sm uppercase",children:"Pricing"})}),(0,t.jsx)(n,{label:"MSRP",values:e.map(e=>e.msrp),format:e=>e?v(e):"-",highlight:"lower"}),(0,t.jsx)("tr",{className:"bg-gray-900",children:(0,t.jsx)("td",{colSpan:e.length+1,className:"px-4 py-2 text-blue-400 font-semibold text-sm uppercase",children:"Safety"})}),(0,t.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,t.jsx)("td",{className:"px-4 py-2 text-gray-400 font-medium",children:"IIHS Rating"}),e.map(e=>(0,t.jsx)("td",{className:"px-4 py-2 text-center",children:(0,t.jsx)(d,{rating:e.safetyRating})},e.id))]}),(0,t.jsx)("tr",{className:"bg-gray-900",children:(0,t.jsx)("td",{colSpan:e.length+1,className:"px-4 py-2 text-blue-400 font-semibold text-sm uppercase",children:"Dimensions"})}),(0,t.jsx)(n,{label:"Width (Mirrors Folded)",values:e.map(e=>e.mirrorsFoldedWidthInches),format:e=>e?`${e.toFixed(1)}"`:"-",highlight:"lower"}),(0,t.jsx)(n,{label:"Width (Mirrors Extended)",values:e.map(e=>w(e,l)),format:e=>e?`${e.toFixed(1)}"`:"-",highlight:"lower"}),(0,t.jsx)(n,{label:"Length",values:e.map(e=>e.lengthInches),format:e=>e?`${e}"`:"-"}),(0,t.jsx)(n,{label:"Height",values:e.map(e=>e.heightInches),format:e=>e?`${e}"`:"-"}),(0,t.jsx)("tr",{className:"bg-gray-900",children:(0,t.jsx)("td",{colSpan:e.length+1,className:"px-4 py-2 text-blue-400 font-semibold text-sm uppercase",children:"Capacity"})}),(0,t.jsx)(n,{label:"Seats",values:e.map(e=>e.seats),highlight:"higher"}),(0,t.jsx)(n,{label:"Driver Legroom",values:e.map(e=>e.driverLegroomInches),format:e=>e?`${e}"`:"-",highlight:"higher"}),(0,t.jsx)(n,{label:"Cargo Volume",values:e.map(e=>e.cargoVolumesCuFt),format:e=>e?`${e} cu ft`:"-",highlight:"higher"}),(0,t.jsx)("tr",{className:"bg-gray-900",children:(0,t.jsx)("td",{colSpan:e.length+1,className:"px-4 py-2 text-blue-400 font-semibold text-sm uppercase",children:"Efficiency"})}),(0,t.jsx)(n,{label:"Combined MPG",values:e.map(e=>e.mpgCombined),highlight:"higher"}),(0,t.jsx)(n,{label:"MPGe",values:e.map(e=>e.mpge),highlight:"higher"}),(0,t.jsx)(n,{label:"EV Range",values:e.map(e=>e.electricRangeMiles),format:e=>e?`${e} mi`:"-",highlight:"higher"}),(0,t.jsx)("tr",{className:"bg-gray-900",children:(0,t.jsx)("td",{colSpan:e.length+1,className:"px-4 py-2 text-blue-400 font-semibold text-sm uppercase",children:"Powertrain"})}),(0,t.jsx)(n,{label:"Fuel Type",values:e.map(e=>e.fuelType)}),(0,t.jsx)(n,{label:"Plug Type",values:e.map(e=>"none"===e.plugType?"N/A":e.plugType)})]})]})}),(0,t.jsx)("div",{className:"mt-6 text-center text-gray-500 text-sm",children:"Green highlighting indicates the best value in each category"})]})})}let O="carcompare_favorites",Y="carcompare_filters",z="carcompare_mirrorBuffer",J="carcompare_baseline";function _(){let e=a.default.cars,r=a.default.mirrorBuffer,l=e.find(e=>"toyota-rav4-2011"===e.id)??null,[i,n]=(0,s.useState)({}),[d,o]=(0,s.useState)({field:"msrp",direction:"asc"}),[c,x]=(0,s.useState)(l),[m,h]=(0,s.useState)(r),[g,p]=(0,s.useState)([]),[u,b]=(0,s.useState)([]),[v,N]=(0,s.useState)(!1),[C,k]=(0,s.useState)(!1),[S,F]=(0,s.useState)("");(0,s.useEffect)(()=>{let t=new URLSearchParams(window.location.search).get("state");if(t)try{let s=JSON.parse(atob(t));if(s.filters&&n(s.filters),s.sort&&o(s.sort),s.baseline){let t=e.find(e=>e.id===s.baseline);t&&x(t)}s.compare&&b(s.compare)}catch(e){console.error("Failed to parse shared state:",e)}else{let t=localStorage.getItem(O);t&&p(JSON.parse(t));let s=localStorage.getItem(Y);s&&n(JSON.parse(s));let a=localStorage.getItem(z);a&&h(parseInt(a));let r=localStorage.getItem(J);if(r){let t=e.find(e=>e.id===r);t&&x(t)}}k(!0)},[e]),(0,s.useEffect)(()=>{C&&localStorage.setItem(O,JSON.stringify(g))},[g,C]),(0,s.useEffect)(()=>{C&&localStorage.setItem(Y,JSON.stringify(i))},[i,C]),(0,s.useEffect)(()=>{C&&localStorage.setItem(z,m.toString())},[m,C]),(0,s.useEffect)(()=>{C&&c&&localStorage.setItem(J,c.id)},[c,C]);let T=(0,s.useMemo)(()=>[...new Set(e.map(e=>e.make))].sort(),[e]),I=(0,s.useMemo)(()=>{let t=e.filter(e=>{if(void 0!==i.minSeats&&e.seats<i.minSeats||void 0!==i.maxSeats&&e.seats>i.maxSeats)return!1;let t=e.msrp??e.usedPriceHigh??0;if(void 0!==i.minPrice&&t<i.minPrice||void 0!==i.maxPrice&&t>i.maxPrice||i.doors&&i.doors.length>0&&!i.doors.includes(e.doors)||i.fuelTypes&&i.fuelTypes.length>0&&!i.fuelTypes.includes(e.fuelType)||i.plugTypes&&i.plugTypes.length>0&&!i.plugTypes.includes(e.plugType)||i.bodyTypes&&i.bodyTypes.length>0&&!i.bodyTypes.includes(e.bodyType))return!1;if(void 0!==i.maxWidthInches&&("folded"===(i.widthFilterType??"extended")?e.mirrorsFoldedWidthInches??e.bodyWidthInches+2:e.mirrorWidthInches??e.bodyWidthInches+m)>i.maxWidthInches)return!1;return(!i.makes||!(i.makes.length>0)||!!i.makes.includes(e.make))&&(void 0===i.minLegroom||!!e.driverLegroomInches&&!(e.driverLegroomInches<i.minLegroom))&&(!i.safetyRatings||!(i.safetyRatings.length>0)||!!e.safetyRating&&!!i.safetyRatings.includes(e.safetyRating))&&(void 0===i.minYear||!(e.year<i.minYear))&&(void 0===i.maxYear||!(e.year>i.maxYear))&&(void 0===i.minMpg||!((e.mpgCombined??e.mpge??0)<i.minMpg))&&(void 0===i.minEvRange||!!e.electricRangeMiles&&!(e.electricRangeMiles<i.minEvRange))&&(void 0===i.minCargo||!!e.cargoVolumesCuFt&&!(e.cargoVolumesCuFt<i.minCargo))&&(!i.autonomousLevels||!(i.autonomousLevels.length>0)||!!e.autonomousLevel&&!!i.autonomousLevels.includes(e.autonomousLevel))&&(!0!==i.hasHandsFree||!!e.adasFeatures?.handsFreeHighway)&&(!0!==i.hasAutoLaneChange||!!e.adasFeatures?.autoLaneChange)&&!0});if(i.showFavoritesOnly&&(t=t.filter(e=>g.includes(e.id))),S.trim()){let e=S.toLowerCase().trim();t=t.filter(t=>`${t.year} ${t.make} ${t.model} ${t.trim??""} ${t.bodyType} ${t.fuelType}`.toLowerCase().includes(e))}return t},[e,i,m,g,S]),$=(0,s.useMemo)(()=>[...I].sort((e,t)=>{let s,a;switch(d.field){case"year":s=e.year,a=t.year;break;case"make":s=e.make.toLowerCase(),a=t.make.toLowerCase();break;case"model":s=e.model.toLowerCase(),a=t.model.toLowerCase();break;case"bodyType":s=e.bodyType.toLowerCase(),a=t.bodyType.toLowerCase();break;case"bodyWidthInches":s=e.mirrorWidthInches??e.bodyWidthInches,a=t.mirrorWidthInches??t.bodyWidthInches;break;case"mirrorsFoldedWidthInches":s=e.mirrorsFoldedWidthInches??e.bodyWidthInches,a=t.mirrorsFoldedWidthInches??t.bodyWidthInches;break;case"seats":s=e.seats,a=t.seats;break;case"doors":s=e.doors,a=t.doors;break;case"msrp":s=e.msrp??1/0,a=t.msrp??1/0;break;case"mpgCombined":s=e.mpgCombined??e.mpge??0,a=t.mpgCombined??t.mpge??0;break;case"electricRangeMiles":s=e.electricRangeMiles??0,a=t.electricRangeMiles??0;break;case"driverLegroomInches":s=e.driverLegroomInches??0,a=t.driverLegroomInches??0;break;case"safetyRating":s=f[e.safetyRating??"undefined"],a=f[t.safetyRating??"undefined"];break;case"autonomousLevel":s=j[e.autonomousLevel??"undefined"],a=j[t.autonomousLevel??"undefined"];break;default:return 0}if("string"==typeof s&&"string"==typeof a)return"asc"===d.direction?s.localeCompare(a):a.localeCompare(s);let r=s,l=a;return"asc"===d.direction?r-l:l-r}),[I,d]),M=(0,s.useMemo)(()=>e.filter(e=>u.includes(e.id)),[e,u]),P=(0,s.useCallback)(e=>{p(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),R=(0,s.useCallback)(e=>{b(t=>t.includes(e)?t.filter(t=>t!==e):t.length>=4?t:[...t,e])},[]),W=(0,s.useCallback)(e=>{b(t=>t.filter(t=>t!==e))},[]),A=(0,s.useCallback)(()=>{var e,t;let s,a;e=["Year,Make,Model,Trim,Body Type,Safety Rating,Seats,Driver Legroom,Width (Mirrors Folded),Width (Mirrors Extended),Body Width,Length,Height,Cargo Volume,Fuel Type,Plug Type,City MPG,Highway MPG,Combined MPG,MPGe,EV Range,MSRP,Used Price Low,Used Price High,ADAS Level,ADAS Name,Hands-Free Driving,Auto Lane Change,Notes",...$.map(e=>[e.year,e.make,e.model,e.trim??"",e.bodyType,e.safetyRating??"",e.seats,e.driverLegroomInches??"",e.mirrorsFoldedWidthInches??"",w(e,m).toFixed(1),e.bodyWidthInches,e.lengthInches??"",e.heightInches??"",e.cargoVolumesCuFt??"",e.fuelType,"none"===e.plugType?"":e.plugType,e.mpgCity??"",e.mpgHighway??"",e.mpgCombined??"",e.mpge??"",e.electricRangeMiles??"",e.msrp??"",e.usedPriceLow??"",e.usedPriceHigh??"",e.autonomousLevel??"",e.adasName??"",e.adasFeatures?.handsFreeHighway?"Yes":"No",e.adasFeatures?.autoLaneChange?"Yes":"No",e.notes??""]).map(e=>e.map(e=>"string"==typeof e&&(e.includes(",")||e.includes('"'))?`"${e.replace(/"/g,'""')}"`:e).join(","))].join("\n"),t=`car-compare-${new Date().toISOString().split("T")[0]}.csv`,s=new Blob([e],{type:"text/csv;charset=utf-8;"}),(a=document.createElement("a")).href=URL.createObjectURL(s),a.download=t,a.click(),URL.revokeObjectURL(a.href)},[$,m]),H=(0,s.useCallback)(()=>{let e=btoa(JSON.stringify({filters:i,sort:d,baseline:c?.id,compare:u})),t=`${window.location.origin}${window.location.pathname}?state=${e}`;navigator.clipboard.writeText(t).then(()=>{alert("Share link copied to clipboard!")}).catch(()=>{prompt("Copy this link to share:",t)})},[i,d,c,u]);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,t.jsx)("header",{className:"bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 border-b border-gray-700 px-6 py-5",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-extrabold tracking-tight",children:[(0,t.jsx)("span",{className:"text-blue-400",children:"Car"}),(0,t.jsx)("span",{className:"text-white",children:"Compare"})]}),(0,t.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Find the perfect car for your garage and family"})]}),(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[u.length>0&&(0,t.jsxs)("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded text-sm font-medium",children:["Compare (",u.length,")"]}),(0,t.jsx)("button",{onClick:A,className:"px-4 py-2 bg-green-700 hover:bg-green-600 text-white rounded text-sm font-medium",title:"Export filtered results to CSV",children:"Export CSV"}),(0,t.jsx)("button",{onClick:H,className:"px-4 py-2 bg-purple-700 hover:bg-purple-600 text-white rounded text-sm font-medium",title:"Copy shareable link with current filters",children:"Share"})]})]})}),(0,t.jsx)("main",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,t.jsxs)("aside",{className:"lg:w-80 flex-shrink-0 space-y-4",children:[(0,t.jsx)(B,{cars:e,baselineCar:c,onBaselineChange:x,mirrorBuffer:m}),(0,t.jsx)(y,{filters:i,onFiltersChange:n,availableMakes:T,mirrorBuffer:m,onMirrorBufferChange:h,hasFavorites:g.length>0})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search cars (e.g., Toyota, SUV, 2025, hybrid...)",value:S,onChange:e=>F(e.target.value),className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-blue-500"}),(0,t.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),S&&(0,t.jsx)("button",{onClick:()=>F(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white",children:"×"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("p",{className:"text-gray-400",children:["Showing ",$.length," of ",e.length," vehicles"]}),g.length>0&&(0,t.jsxs)("span",{className:"text-yellow-400 text-sm",children:["★ ",g.length," favorited"]})]}),(0,t.jsxs)("p",{className:"text-gray-500 text-sm",children:["Last updated: ",a.default.lastSyncDate]})]})]}),(0,t.jsx)("div",{className:"block lg:hidden",children:(0,t.jsx)(K,{cars:$,baselineCar:c,mirrorBuffer:m,favorites:g,compareList:u,onToggleFavorite:P,onToggleCompare:R,onSelectBaseline:x})}),(0,t.jsx)("div",{className:"hidden lg:block",children:(0,t.jsx)(L,{cars:$,sortConfig:d,onSortChange:e=>{o(t=>({field:e,direction:t.field===e&&"asc"===t.direction?"desc":"asc"}))},baselineCar:c,mirrorBuffer:m,onSelectBaseline:x,compareList:u,onToggleCompare:R,favorites:g,onToggleFavorite:P})})]})]})}),(0,t.jsx)("footer",{className:"bg-gray-800 border-t border-gray-700 px-6 py-4 mt-8",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsxs)("p",{className:"text-gray-500 text-sm text-center",children:["Data sourced from manufacturer specifications. Prices and availability may vary. Width marked with * uses body width + ",m,'" mirror buffer estimate.']}),(0,t.jsxs)("p",{className:"text-gray-500 text-sm",children:["Part of"," ",(0,t.jsxs)("a",{href:"https://krool.github.io/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors inline-flex items-center gap-1",children:["Krool World",(0,t.jsxs)("svg",{className:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),(0,t.jsx)("polyline",{points:"15 3 21 3 21 9"}),(0,t.jsx)("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]})]})}),v&&M.length>0&&(0,t.jsx)(U,{cars:M,onClose:()=>N(!1),onRemoveCar:W,mirrorBuffer:m})]})}function K({cars:e,baselineCar:s,mirrorBuffer:a,favorites:r,compareList:l,onToggleFavorite:i,onToggleCompare:n,onSelectBaseline:d}){return 0===e.length?(0,t.jsx)("div",{className:"bg-gray-800 rounded-lg p-8 text-center text-gray-400",children:"No cars match your filters. Try adjusting the filter criteria."}):(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>{var o;let c=s?.id===e.id,x=r.includes(e.id),m=l.includes(e.id),h=e.mirrorWidthInches??e.bodyWidthInches+a;return(0,t.jsxs)("div",{className:`bg-gray-800 rounded-lg p-4 ${c?"ring-2 ring-blue-500":x?"ring-2 ring-yellow-500/50":""}`,children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("img",{src:((e,t=400)=>{let s=e.model.split(" ")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),a=e.make.toLowerCase();return`https://cdn.imagin.studio/getImage?customer=img&make=${a}&modelFamily=${s}&paintId=pspc0001&angle=01&width=${t}`})(e,200),alt:`${e.year} ${e.make} ${e.model}`,className:"w-32 h-20 object-cover rounded"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-white font-semibold",children:[e.year," ",e.make," ",e.model]}),e.trim&&(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:e.trim})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>i(e.id),className:`text-xl ${x?"text-yellow-400":"text-gray-600"}`,children:"★"}),(0,t.jsx)("input",{type:"checkbox",checked:m,onChange:()=>n(e.id),className:"w-5 h-5"})]})]}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2 text-xs",children:[(0,t.jsx)("span",{className:"px-2 py-0.5 bg-gray-700 rounded",children:e.bodyType}),(0,t.jsxs)("span",{className:"px-2 py-0.5 bg-gray-700 rounded",children:[e.seats," seats"]}),e.safetyRating&&"Not Rated"!==e.safetyRating&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-green-800 text-green-200 rounded",children:e.safetyRating})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"MSRP:"}),(0,t.jsx)("span",{className:"text-white ml-2",children:void 0===(o=e.msrp)?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(o)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Width:"}),(0,t.jsxs)("span",{className:"text-white ml-2",children:[h.toFixed(1),'"']})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Legroom:"}),(0,t.jsx)("span",{className:"text-white ml-2",children:e.driverLegroomInches?`${e.driverLegroomInches}"`:"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"MPG:"}),(0,t.jsxs)("span",{className:"text-white ml-2",children:[e.mpgCombined??e.mpge??"-",e.mpge?" MPGe":""]})]})]}),(0,t.jsx)("div",{className:"mt-4 flex gap-2",children:(0,t.jsx)("button",{onClick:()=>d(e),className:`flex-1 px-3 py-2 rounded text-sm ${c?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,children:c?"✓ Baseline":"Set as Baseline"})})]},e.id)})})}e.s(["default",()=>_],52683)}]);